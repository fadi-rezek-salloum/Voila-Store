<div class="container-fluid my-5">
    <div class="row">
        <div class="col-12">
            <h1 class="fw-bold">
                سلة المشتريات
            </h1>
        </div>
        <div class="col-12 mt-3" *ngIf="success">
            <div class="alert alert-success">
                <fa-icon [icon]="faCheckCircle"></fa-icon>
                لقد تمت عملية الشراء بنجاح!
            </div>
        </div>
        <div class="col-12 mt-3">
            <button class="btn text-danger card-header" (click)="clearCart()">
                <fa-icon [icon]="faTrash"></fa-icon>
                إفراغ سلة المشتريات
            </button>
        </div>
    </div>
    <div class="row mt-5">
        <div class="col-12">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th></th>
                        <th>اسم المنتج</th>
                        <th>السعر</th>
                        <th style="width: 25%;">الكمية</th>
                        <th>السعر الكلي</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngIf="total==0">
                        <td class="my-5 text-center" colspan="6">
                            لا يوجد عناصر في سلة المشتريات!
                        </td>
                    </tr>
                    <tr *ngFor="let item of cartProducts; let index = index">
                        <td><img src="http://localhost:8000{{item.item.image}}" class="cart__img" alt="P"></td>
                        <td>{{item.item.title}}</td>
                        <td>{{item.item.price}}</td>
                        <td>
                            <div class="quantity">
                                <button class="btn btn-danger" (click)="addAmount(index)" >+</button>
                                <span class="mx-2">{{item.amount}}</span>
                                <button class="btn btn-danger" (click)="minsAmount(index)" >-</button>
                            </div>
                        </td>
                        <td>{{item.item.price * item.amount}}</td>
                        <td>
                            <button class="btn btn-danger" (click)="deleteProduct(index)" >
                                <fa-icon [icon]="faCheckCircle"></fa-icon>
                                حذف العنصر
                            </button>
                        </td>
                    </tr>
                </tbody> 
                <tfoot>
                    <tr>
                        <th *ngIf="total>0" colspan="6" class="text-center">المجموع: {{total}}</th>
                    </tr>
                    <tr>
                        <th *ngIf="total>0" colspan="6">
                            <input type="text" name="address" class="form-control" placeholder="أدخل العنوان..." [(ngModel)]="address">
                        </th>
                    </tr>
                    <tr>
                        <th *ngIf="total>0" colspan="6" class="text-center"><button class="btn btn-danger" (click)="addCart()">
                            <fa-icon [icon]="faCartShopping"></fa-icon>
                            الطلب
                        </button></th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>